BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "ASISTENCIA" (
	"ACTIVIDAD"	TEXT,
	"DNIA"	INTEGER,
	"DNII"	INTEGER,
	"FICHA"	INTEGER
);
CREATE TABLE IF NOT EXISTS "CONFIGURA" (
	"CENTRO"	TEXT,
	"FINICIA"	DATE,
	"FFIN"	DATE
);
CREATE TABLE IF NOT EXISTS "admin" (
	"id"	INTEGER NOT NULL,
	"NOM"	TEXT NOT NULL,
	"EMAIL"	TEXT NOT NULL,
	"CLA"	TEXT NOT NULL,
	"FECHA"	DATETIME DEFAULT (DATETIME('now', 'localtime')),
	PRIMARY KEY("id")
);
CREATE TABLE IF NOT EXISTS "fichaaprendiz" (
	"id"	INTEGER NOT NULL,
	"FICHA"	TEXT,
	"DNIA"	TEXT,
	"NOMBREAP"	TEXT,
	"ESTADOAP"	INTEGER DEFAULT 0,
	"PWDAP"	TEXT NOT NULL,
	"EMAIL"	TEXT,
	"TITULACION"	TEXT NOT NULL,
	"FECHA"	DATETIME DEFAULT (DATETIME('now', 'localtime')),
	PRIMARY KEY("id")
);
CREATE TABLE IF NOT EXISTS "fichainstructor" (
	"NOMINST"	TEXT,
	"DNI"	TEXT NOT NULL,
	"FICHA"	TEXT,
	"EMAIL"	TEXT,
	"LIDER"	INTEGER NOT NULL DEFAULT 0 CHECK("LIDER" IN (0, 1)),
	"TRIMESTRE"	INTEGER NOT NULL DEFAULT 1 CHECK("TRIMESTRE" IN (1, 2, 3, 4)),
	"FECHA"	DATETIME DEFAULT (DATETIME('now', 'localtime')),
	"PWD"	TEXT
	);
CREATE TABLE IF NOT EXISTS "menu" ("idMenu" INTEGER NOT NULL PRIMARY KEY, "LUGAR" INTEGER NOT NULL, "NOM" TEXT NOT NULL, "RUTA" TEXT NOT NULL, "ROL" TEXT NOT NULL, "ICONO" TEXT);
CREATE TABLE IF NOT EXISTS "pregunta" (
	"id"	INTEGER NOT NULL,
	"DESCRIPCION"	TEXT NOT NULL,
	"ESTADO"	INTEGER NOT NULL,
	"VALORES"	TEXT NOT NULL,
	"FECHA"	DATETIME DEFAULT (DATETIME('now', 'localtime')),
	PRIMARY KEY("id")
);
CREATE TABLE IF NOT EXISTS "theval" (
	"idINSTRUCTOR"	INTEGER,
	"idFICHA"	INTEGER,
	"TITULACION"	TEXT,
	"idAPRENDIZ"	INTEGER,
	"PREGUNTA"	TEXT,
	"RESPUESTA"	TEXT,
	"TRIMESTRE"	TEXT DEFAULT 0,
	"FECHA"	DATETIME DEFAULT (DATETIME('now', 'localtime'))
);
INSERT INTO "ASISTENCIA" ("ACTIVIDAD","DNIA","DNII","FICHA") VALUES ('xxxx',1234,5678,NULL),
 ('zzzz',1234,5678,NULL),
 ('base de datos',1234,5678,NULL),
 ('TESTING',1234,5678,NULL);
INSERT INTO "admin" ("id","NOM","EMAIL","CLA","FECHA") VALUES (1,'ADMIN','admin@sena.edu.co','1234','2025-05-16 10:09:59');
INSERT INTO "fichaaprendiz" ("id","FICHA","DNIA","NOMBREAP","ESTADOAP","PWDAP","EMAIL","TITULACION","FECHA") VALUES (1,'3147246','1013106019','DUQUE URIBE JUANA VALENTINA',1,'5218f316b3f85b751c613a06aa18010d','juanav_duque@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:51'),
 (2,'3147246','1021673398','GUZMAN MARTINEZ ANA MARIA',1,'384babc3e7faa44cf1ca671b74499c3b','anam_guzmanm@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:51'),
 (3,'3147246','1023869341','BAYONA RODRIGUEZ NICOLAS SANTIAGO',1,'8f187f643090a53e52550571a8e92ad8','SINCORREO','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:51'),
 (4,'3147246','1028662529','PRATO BARON ALYSON SOFIA',1,'82ca5dd156cc926b2992f73c2896f761','alyson_prato@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:51'),
 (5,'3147246','1029144034','CARO CASTILLO ALLAN DUVAN',1,'7f5fc754c7af0a6370c9bf91314e79f4','allan_caro@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (6,'3147246','1031807403','NAVARRO PEÑATA RONALDO DAVID (retiro sin confirmar)',1,'84e8ce7870f0eecd843366582bb95a28','SINCORREO','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (7,'3147246','1033688216','LADINO MARTINEZ ERICK SEBASTIAN',1,'47f91db40efc6a22350eca5c953c4742','erick.ladino@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (8,'3147246','1033699384','RAMOS GOMEZ WILL ANDRES',1,'bee8b2cc16ae69b1d21dfd4fa9dbf9ef','will_ramos@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (9,'3147246','1140915150','MOSQUERA ABADIA JEIFFER HARLEY',1,'26c0a195973b46ba52a013c89dd82315','jeifferh_mosquera@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (10,'3147246','1011323882','TEQUIA FORERO JOHAN SEBASTIAN',1,'df42e2244c97a0d80d565ae8176d3351','johan_tequia@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (11,'3147246','1012918489','SANCHEZ CASTAÑO YOSTING NICOLAS',1,'41ccc97e4f1b5de999aa6468ff787d89','yosting_sanchez@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (12,'3147246','1013606186','BOHORQUEZ MEDINA JULIAN ESTEBAN',1,'fb3deea8bff8902a6a092a4b532b4a68','juliane_bohorquez@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (13,'3147246','1019764408','GUZMAN GARZON ALIXON LIZETH',1,'c793b3be8f18731f2a4c627fb3c6c63d','SINCORREO','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (14,'3147246','1021677369','BERNAL RODRIGUEZ DAVID ESTEBAN',1,'0d7f9017fbda691900187b22404b8a1f','davide_bernalr@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (15,'3147246','1022951812','MARTINEZ CARDENAS ANDERSON ARLENDI',1,'5b6ba13f79129a74a3e819b78e36b922','SINCORREO','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (16,'3147246','1022957056','OLAYA RIOS YERALDIN',1,'ced92d38d8fec10f1da779dfa44f8bbe','yeraldin_olaya@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (17,'3147246','1023887425','GUZMAN ALVAREZ LUISA ALEJANDRA',1,'966aad8981dcc75b5b8ab04427a833b2','luisaa_guzman@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:52'),
 (18,'3147246','1025142997','ROJAS BURBANO JUAN DAVID',1,'a0b83c02d720415dada82e08bc09e9f3','juan.rojas924@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:53'),
 (19,'3147246','1025535793','SANDON GUARIN ZACK BRANDON',1,'fe256faf97c200de0f7486ddf56c02f6','zack.sandon@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:53'),
 (20,'3147246','1025536809','ZAZIPA SIMBAQUEBA MIGUEL ANGEL',1,'5c3a3b139a11689e0bc55abd95e20e39','miguel_zazipa@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:53'),
 (21,'3147246','1025537107','MEDINA VARGAS JHON DEIVY',1,'09676fac73eda6cac726c43e43e86c58','jhond_medinav@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:53'),
 (22,'3147246','1025538713','AMAYA BEJARANO NICOL MARIANA',1,'ff84a9f3c0d335d25413dd8dfc9b2e8f','nicolm_amaya@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:53'),
 (23,'3147246','1028664020','DIAZ SARMIENTO BRANDON DARIKSON',1,'1192265fb31ab52a6332c561ee6e5258','brandon.diaz0@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:53'),
 (24,'3147246','1028863049','GAONA PRADA VALERY SOFIA',1,'4fa177df22864518b2d7818d4db5db2d','valery_gaona@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:53'),
 (25,'3147246','1028864817','QUINTERO MARTINEZ BRANDON STEVEN',1,'7e6ff0205749bc6025b51155e26f6ced','brandons_quinterom@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:53'),
 (26,'3147246','1029281924','CIGUABITA BARRERA ALAN FERNANDO',1,'b139e104214a08ae3f2ebcce149cdf6e','alan_cigabita@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:54'),
 (27,'3147246','1033708927','NAVAS LOPEZ JESSICA PAOLA',1,'e033fdb11f1faad86c9a492d4696ec31','jessica_navas@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:54'),
 (28,'3147246','1033722230','SEGURA CONTRERAS DANNA YISEL',1,'329e6581efbc90bd92a1f22c4ba2103d','dannay_segura@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:54'),
 (29,'3147246','1034288330','LEON ROLDAN CAMILO ANDRES',1,'c2ddc87b68fed4f62a29c1ff816f58b0','camiloa_leon1@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:54'),
 (30,'3147246','1033100839','RODRIGUEZ MARTINEZ DIEGO ANDRES',1,'b7531d70dbb017fd3a72eeca4b4e91f6','diegoa_rodriguez29@soy.sena.edu.co','ANALISIS Y DESARROLLO DE SOFTWARE','2025-05-24 08:51:54');
INSERT INTO "fichainstructor" ("NOMINST","DNI","FICHA","EMAIL","LIDER","TRIMESTRE","FECHA","PWD") VALUES ('JOSE FERNANDO GALINDO SUAREZ','19407970','3147246','jgalindos@sena.edu.co',0,2,'2025-05-24 08:51:55','ec1093fe1626f25b1845d04dd6f55dd2'),
 ('ULDARICO ANDRADE HERNANDEZ','19123456','3147246','uandrade@sena.edu.co',0,2,'2025-05-24 08:51:55','def7924e3199be5e18060bb3e1d547a7'),
 ('ELIZABETH DOMINGUEZ AUESCUM','5123456','3147246','edominguez@sena.edu.co',0,2,'2025-05-24 08:51:55','def7924e3199be5e18060bb3e1d547a7');
INSERT INTO "menu" ("idMenu","LUGAR","NOM","RUTA","ROL","ICONO") VALUES (1,1,'CARGAR FOTOS','/login','INS','fa fa-bars'),
 (3,1,'USUARIOS','/','ADM',NULL),
 (4,1,'TERMINAR','/salir','APR','fa fa-home');
INSERT INTO "pregunta" ("id","DESCRIPCION","ESTADO","VALORES","FECHA") VALUES (1,'El instructor acompaña y orienta la solución de sus dificultades académicas y personales.',1,'NUNCA, DE VEZ EN CUANDO, SIEMPRE','2025-05-24 08:51:55'),
 (2,'El instructor aplica estrategias participativas de trabajo en equipo que le permiten estar activo permanentemente en su proceso de aprendizaje.',1,'NUNCA, DE VEZ EN CUANDO, SIEMPRE','2025-05-24 08:51:55'),
 (3,'El instructor demuestra dominio técnico.',1,'NO, SI','2025-05-24 08:51:55'),
 (4,'El instructor desarrolla la totalidad de los resultados de aprendizaje programados.',1,'NO, SI','2025-05-24 08:51:55'),
 (5,'El instructor es puntual al iniciar las sesiones.',1,'NUNCA, A VECES, SIEMPRE','2025-05-24 08:51:55'),
 (6,'El instructor establece relaciones interpersonales cordiales, armoniosas y respetuosas.',1,'NUNCA, A VECES, SIEMPRE','2025-05-24 08:51:55'),
 (7,'El instructor incentiva al aprendiz a utilizar una plataforma LMS en el desarrollo de las actividades de aprendizaje.',1,'NUNCA, DE VEZ EN CUANDO, SIEMPRE','2025-05-24 08:51:55'),
 (8,'El instructor le da a conocer el proyecto formativo, la planeación pedagógica y las guiás de aprendizaje.',1,'NUNCA, A VECES, SIEMPRE','2025-05-24 08:51:55'),
 (9,'El instructor le orienta su formación mediante un proyecto formativo.',1,'NUNCA, A VECES, SIEMPRE','2025-05-24 08:51:55'),
 (10,'El instructor le propone fuentes de consulta (Bibliografía,  Webgrafia...) y ayudas que facilitan su proceso de aprendizaje.',1,'NUNCA, A VECES, SIEMPRE','2025-05-24 08:51:55'),
 (11,'El instructor revisa y asesora los planes de mejoramiento.',1,'NUNCA, A VECES, SIEMPRE','2025-05-24 08:51:55'),
 (12,'El instructor se preocupa por su mejoramiento continuo a nivel personal, social y laboral.',1,'NUNCA, A VECES, SIEMPRE','2025-05-24 08:51:56');
INSERT INTO "theval" ("idINSTRUCTOR","idFICHA","TITULACION","idAPRENDIZ","PREGUNTA","RESPUESTA","TRIMESTRE","FECHA") VALUES (19407970,3147246,'x',1013106019,'x','si','t','2025-05-24 10:11:49'),
 (19407970,3147247,'x',1013106019,'y','si','t','2025-05-24 10:12:38');
CREATE VIEW VADMIN AS
SELECT * ,EMAIL FROM ADMIN;
CREATE VIEW VAPRENDIZ AS
SELECT * ,EMAIL FROM FICHAAPRENDIZ;
CREATE VIEW VINSTRUCTOR AS
SELECT DISTINCT 'INSTRUCTOR' TIPO,COUNT(*) CANT,EMAIL FROM FICHAINSTRUCTOR;
CREATE VIEW VINSTRUCTORESP AS
SELECT DISTINCT TITULACION,F.FICHA,DNI DNINST,FI.EMAIL EMAILINST,NOMINST,DNIA DNIAP,NOMBREAP,F.EMAIL EMAILAP 
FROM FICHAINSTRUCTOR FI 
JOIN fichaaprendiz F
ON FI.FICHA=F.FICHA
WHERE  FI.DNI NOT IN (SELECT DISTINCT IDINSTRUCTOR FROM THEVAL WHERE idFICHA=FI.FICHA AND idAPRENDIZ=F.DNIA);
CREATE VIEW VTIPO AS
SELECT 'APRENDIZ' TIPO,COUNT(*) CANT,EMAIL FROM VAPRENDIZ 
UNION
SELECT 'INSTRUCTOR', COUNT(*),EMAIL FROM VINSTRUCTOR 
UNION
SELECT 'ADMIN',COUNT(*),EMAIL FROM VADMIN;
COMMIT;
